# 管理者認証システム

## 概要
College Sparkの管理者画面は、セキュアな認証システムで保護されています。URLパラメータによる認証から、セッションベースの認証に移行しました。

## 初期セットアップ

### 1. 初期管理者アカウントの作成

#### 方法1: Webブラウザから
1. `/admin/setup` にアクセス
2. 初期管理者の情報を入力：
   - ユーザー名（3-30文字）
   - メールアドレス
   - パスワード（8文字以上）
3. 「初期管理者を作成」をクリック

#### 方法2: コマンドラインから
```bash
rails admin:create_initial
```

## 管理者画面へのアクセス

1. `/admin/login` にアクセス
2. ユーザー名とパスワードでログイン
3. ログイン後、管理画面にアクセス可能：
   - `/admin` - ダッシュボード
   - `/admin/surveys` - アンケート管理
   - `/admin/users` - ユーザー管理
   - `/admin/conditions` - 大学データ管理

## セキュリティ機能

- パスワードはbcryptでハッシュ化
- セッショントークンによる認証
- 30分間のセッションタイムアウト
- CSRF保護
- 権限レベル（admin, super_admin）

## 旧URLからの移行

以下の旧URLは使用できなくなりました：
- `/admin/surveys?admin_key=...` → `/admin/surveys`
- `/admin/users?secret=...` → `/admin/users`

必ず新しい認証システムを使用してください。