
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">



    
<div class ="main">
    <div class="copy-container">
    <h1>Let's find your best college!</h1>
    <h2>~アメリカの大学を見てみよう！~</h2>
    
    
    <!-- 大学名検索機能 -->
    <div class="college-name-search">
        <div class="search-header">
            <h3><i class="fa fa-search me-2"></i>大学名で直接検索</h3>
        </div>
        <div class="search-input-container">
            <input type="text" id="college-name-input" placeholder="例：Harvard University, Stanford University..." class="college-search-input">
            <button id="name-search-button" class="name-search-btn">
                <i class="fa fa-search"></i> 検索
            </button>
        </div>
        <div class="search-separator">
            <span>または</span>
        </div>
    </div>
    </div>

    <div class="contents">
        <div class="conditions1">
            <div class="box">
                <div class="line-header1">
                <h1><i class="fa fa-globe-americas me-2"></i>州</h1>
                </div>      
                <div class="custom-dropdown">
                    <button class="custom-dropdown-btn" id="dropdownMenuButton" type="button">
                        選択してください
                        <span class="dropdown-arrow">▼</span>
                    </button>
                    <input type="hidden" id="selectedState" value="選択してください">
                    <div class="custom-dropdown-menu" id="dropdownMenu">
                        <div class="dropdown-item" data-value="指定しない">指定しない</div>
                        <div class="dropdown-item" data-value="アラバマ州(AL)">アラバマ州(AL)</div>
                        <div class="dropdown-item" data-value="アラスカ州(AK)">アラスカ州(AK)</div>
                        <div class="dropdown-item" data-value="アリゾナ州(AZ)">アリゾナ州(AZ)</div>
                        <div class="dropdown-item" data-value="アーカンソー州(AR)">アーカンソー州(AR)</div>
                        <div class="dropdown-item" data-value="カリフォルニア州(CA)">カリフォルニア州(CA)</div>
                        <div class="dropdown-item" data-value="コロラド州(CO)">コロラド州(CO)</div>
                        <div class="dropdown-item" data-value="コネチカット州(CT)">コネチカット州(CT)</div>
                        <div class="dropdown-item" data-value="デラウェア州(DE)">デラウェア州(DE)</div>
                        <div class="dropdown-item" data-value="コロンビア特別区(DC)">コロンビア特別区(DC)</div>
                        <div class="dropdown-item" data-value="フロリダ州(FL)">フロリダ州(FL)</div>
                        <div class="dropdown-item" data-value="ジョージア州(GA)">ジョージア州(GA)</div>
                        <div class="dropdown-item" data-value="ハワイ州(HI)">ハワイ州(HI)</div>
                        <div class="dropdown-item" data-value="アイダホ州(ID)">アイダホ州(ID)</div>
                        <div class="dropdown-item" data-value="イリノイ州(IL)">イリノイ州(IL)</div>
                        <div class="dropdown-item" data-value="インディアナ州(IN)">インディアナ州(IN)</div>
                        <div class="dropdown-item" data-value="アイオワ州(IA)">アイオワ州(IA)</div>
                        <div class="dropdown-item" data-value="カンザス州(KS)">カンザス州(KS)</div>
                        <div class="dropdown-item" data-value="ケンタッキー州(KY)">ケンタッキー州(KY)</div>
                        <div class="dropdown-item" data-value="ルイジアナ州(LA)">ルイジアナ州(LA)</div>
                        <div class="dropdown-item" data-value="メイン州(ME)">メイン州(ME)</div>
                        <div class="dropdown-item" data-value="メリーランド州(MD)">メリーランド州(MD)</div>
                        <div class="dropdown-item" data-value="マサチューセッツ州(MA)">マサチューセッツ州(MA)</div>
                        <div class="dropdown-item" data-value="ミシガン州(MI)">ミシガン州(MI)</div>
                        <div class="dropdown-item" data-value="ミネソタ州(MN)">ミネソタ州(MN)</div>
                        <div class="dropdown-item" data-value="ミシシッピ州(MS)">ミシシッピ州(MS)</div>
                        <div class="dropdown-item" data-value="ミズーリ州(MO)">ミズーリ州(MO)</div>
                        <div class="dropdown-item" data-value="モンタナ州(MT)">モンタナ州(MT)</div>
                        <div class="dropdown-item" data-value="ネブラスカ州(NE)">ネブラスカ州(NE)</div>
                        <div class="dropdown-item" data-value="ネバダ州(NV)">ネバダ州(NV)</div>
                        <div class="dropdown-item" data-value="ニューハンプシャー州(NH)">ニューハンプシャー州(NH)</div>
                        <div class="dropdown-item" data-value="ニュージャージー州(NJ)">ニュージャージー州(NJ)</div>
                        <div class="dropdown-item" data-value="ニューメキシコ州(NM)">ニューメキシコ州(NM)</div>
                        <div class="dropdown-item" data-value="ニューヨーク州(NY)">ニューヨーク州(NY)</div>
                        <div class="dropdown-item" data-value="ノースカロライナ州(NC)">ノースカロライナ州(NC)</div>
                        <div class="dropdown-item" data-value="ノースダコタ州(ND)">ノースダコタ州(ND)</div>
                        <div class="dropdown-item" data-value="オハイオ州(OH)">オハイオ州(OH)</div>
                        <div class="dropdown-item" data-value="オクラホマ州(OK)">オクラホマ州(OK)</div>
                        <div class="dropdown-item" data-value="オレゴン州(OR)">オレゴン州(OR)</div>
                        <div class="dropdown-item" data-value="ペンシルベニア州(PA)">ペンシルベニア州(PA)</div>
                        <div class="dropdown-item" data-value="ロードアイランド州(RI)">ロードアイランド州(RI)</div>
                        <div class="dropdown-item" data-value="サウスカロライナ州(SC)">サウスカロライナ州(SC)</div>
                        <div class="dropdown-item" data-value="サウスダコタ州(SD)">サウスダコタ州(SD)</div>
                        <div class="dropdown-item" data-value="テネシー州(TN)">テネシー州(TN)</div>
                        <div class="dropdown-item" data-value="テキサス州(TX)">テキサス州(TX)</div>
                        <div class="dropdown-item" data-value="ユタ州(UT)">ユタ州(UT)</div>
                        <div class="dropdown-item" data-value="バーモント州(VT)">バーモント州(VT)</div>
                        <div class="dropdown-item" data-value="バージニア州(VA)">バージニア州(VA)</div>
                        <div class="dropdown-item" data-value="ワシントン州(WA)">ワシントン州(WA)</div>
                        <div class="dropdown-item" data-value="ウェストバージニア州(WV)">ウェストバージニア州(WV)</div>
                        <div class="dropdown-item" data-value="ウィスコンシン州(WI)">ウィスコンシン州(WI)</div>
                        <div class="dropdown-item" data-value="ワイオミング州(WY)">ワイオミング州(WY)</div>
                    </div>    
                </div>                   
            </div>
        </div>
        <style>
        .custom-dropdown {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .custom-dropdown-btn {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 12px 16px;
            width: 100%;
            text-align: left;
            font-size: 16px;
            color: #495057;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .custom-dropdown-btn:hover {
            border-color: #adb5bd;
            background: #e9ecef;
        }

        .custom-dropdown-btn:focus {
            outline: none;
            border-color: #80bdff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }

        .dropdown-arrow {
            transition: transform 0.3s ease;
            font-size: 12px;
        }

        .custom-dropdown.active .dropdown-arrow {
            transform: rotate(180deg);
        }

        .custom-dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #dee2e6;
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .custom-dropdown-menu.dropup {
            top: auto;
            bottom: 100%;
            border-top: 2px solid #dee2e6;
            border-bottom: none;
            border-radius: 8px 8px 0 0;
            box-shadow: 0 -4px 6px rgba(0, 0, 0, 0.1);
        }

        .custom-dropdown.active .custom-dropdown-menu {
            display: block;
        }

        .dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            border-bottom: 1px solid #f8f9fa;
            color: #495057;
            transition: background-color 0.2s ease;
        }

        .dropdown-item:hover {
            background-color: #f8f9fa;
            color: #212529;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }
        </style>

        <script>
        document.addEventListener('DOMContentLoaded', function () {
            const dropdownBtn = document.getElementById('dropdownMenuButton');
            const dropdownMenu = document.getElementById('dropdownMenu');
            const dropdownContainer = document.querySelector('.custom-dropdown');

            // ドロップダウンの位置を調整する関数
            function adjustDropdownPosition() {
                const rect = dropdownContainer.getBoundingClientRect();
                const windowHeight = window.innerHeight;
                const dropdownHeight = 300; // max-height値
                
                // 下方向に十分なスペースがあるかチェック
                const spaceBelow = windowHeight - rect.bottom;
                const spaceAbove = rect.top;
                
                if (spaceBelow < dropdownHeight && spaceAbove > spaceBelow) {
                    // 下にスペースがなく、上にスペースがある場合は上方向に表示
                    dropdownMenu.classList.add('dropup');
                } else {
                    // 通常は下方向に表示
                    dropdownMenu.classList.remove('dropup');
                }
            }

            // ドロップダウンボタンクリック処理
            dropdownBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                
                if (dropdownContainer.classList.contains('active')) {
                    dropdownContainer.classList.remove('active');
                } else {
                    adjustDropdownPosition();
                    dropdownContainer.classList.add('active');
                }
            });

            // ドロップダウンアイテムクリック処理
            document.querySelectorAll('.dropdown-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const selectedText = this.textContent.trim();
                    const selectedValue = this.getAttribute('data-value');
                    
                    // ボタンテキストを更新（矢印は保持）
                    dropdownBtn.innerHTML = selectedText + ' <span class="dropdown-arrow">▼</span>';
                    
                    // 隠し要素に選択された値を保存
                    document.getElementById('selectedState').value = selectedValue;
                    
                    // ドロップダウンを閉じる
                    dropdownContainer.classList.remove('active');
                    
                    // 相互排他処理: 州が選択された場合は大学名検索を無効化
                    const collegeNameInput = document.getElementById('college-name-input');
                    const nameSearchButton = document.getElementById('name-search-button');
                    
                    if (selectedText !== '指定しない' && selectedText !== '選択してください') {
                        collegeNameInput.disabled = true;
                        collegeNameInput.style.opacity = '0.5';
                        nameSearchButton.disabled = true;
                        nameSearchButton.style.opacity = '0.5';
                    } else {
                        // 他の条件入力がない場合は大学名検索を有効化
                        const conditionInputs = document.querySelectorAll('.conditions2 input, .conditions3 input, .conditions4 input, .conditions5 input, .conditions6 input, .conditions7 input, .conditions8 input, .conditions9 input, input[name="tuitionRadios"]');
                        const hasOtherConditions = Array.from(conditionInputs).some(inp => {
                            if (inp.type === 'radio' || inp.type === 'checkbox') {
                                return inp.checked && inp.value !== 'option1';
                            }
                            return inp.value && inp.value.trim() !== '';
                        });
                        
                        if (!hasOtherConditions) {
                            collegeNameInput.disabled = false;
                            collegeNameInput.style.opacity = '1';
                            nameSearchButton.disabled = false;
                            nameSearchButton.style.opacity = '1';
                        }
                    }
                });
            });

            // 外部クリックで閉じる
            document.addEventListener('click', function(e) {
                if (!dropdownContainer.contains(e.target)) {
                    dropdownContainer.classList.remove('active');
                }
            });

            // スクロール時にドロップダウンを閉じる
            window.addEventListener('scroll', function () {
                dropdownContainer.classList.remove('active');
            });
        });
        </script>

        <div class="conditions2">
            <div class="box">
                    <div class="tooltip-container1">
                        <span class="tooltip-trigger">？</span>
                        <div class="tooltip-content">
                        州立大学は、州民以外の学生に対して通常の2~3倍の学費を設定していることに注意が必要です。また、私立大学の方が多くの奨学金を受け取れる傾向にあります。
                        </div>
                    </div> 
                    <div class="line-header2">
                    <h1><i class="fa fa-university me-2"></i>私立/州立</h1>
                    </div>
                <form>
                    <div class="form-group1">
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="exampleRadios" id="radio1" value="option1" checked>
                        <label class="form-check-label" for="radio1">
                        指定しない
                        </label>
                        </div>
                        
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="exampleRadios" id="radio2" value="option2">
                        <label class="form-check-label" for="radio2">
                        私立
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="exampleRadios" id="radio3" value="option3">
                        <label class="form-check-label" for="radio3">
                        州立
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="exampleRadios" id="radio4" value="option4">
                        <label class="form-check-label" for="radio4">
                        2年制 (コミカレ・専門学校等)
                        </label>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="conditions3">
            <div class="box">
                    <div class="tooltip-container2">
                        <span class="tooltip-trigger">？</span>
                        <div class="tooltip-content">
                        州立大学は州外生向け料金、私立大学はNet Price（実質費用）を表示しています。
                        </div>
                    </div> 
                    <div class="line-header3">
                    <h1><i class="fa fa-dollar-sign me-2"></i>年間授業料</h1>
                    </div>
                <form>
                    <div class="form-group2">
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="tuitionRadios" id="tuitionRadio1" value="option1" checked>
                        <label class="form-check-label" for="tuitionRadio1">
                            指定しない
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="tuitionRadios" id="tuitionRadio2" value="option2">
                        <label class="form-check-label" for="tuitionRadio2">
                            ~$9,999
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="tuitionRadios" id="tuitionRadio3" value="option3">
                        <label class="form-check-label" for="tuitionRadio3">
                            $10,000~$19,999
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="tuitionRadios" id="tuitionRadio4" value="option4">
                        <label class="form-check-label" for="tuitionRadio4">
                            $20,000~$29,999
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="tuitionRadios" id="tuitionRadio5" value="option5">
                        <label class="form-check-label" for="tuitionRadio5">
                            $30,000~$39,999
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="tuitionRadios" id="tuitionRadio6" value="option6">
                        <label class="form-check-label" for="tuitionRadio6">
                            $40,000~$49,999
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="tuitionRadios" id="tuitionRadio7" value="option7">
                        <label class="form-check-label" for="tuitionRadio7">
                            $50,000~$59,999
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="tuitionRadios" id="tuitionRadio8" value="option8">
                        <label class="form-check-label" for="tuitionRadio8">
                            $60,000~
                        </label>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="conditions4">
            <div class="box">
                <div class="line-header4">
                <h1><i class="fa fa-users me-2"></i>学生数</h1>    
                </div>
                <form>
                    <div class="form-group3">
                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="groupCheck33.1">
                        <label class="form-check-label" for="groupCheck33.1">
                            小規模(~2999人)
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="groupCheck35">
                        <label class="form-check-label" for="groupCheck35">
                            中規模(3000人~9999人)
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="groupCheck35">
                        <label class="form-check-label" for="groupCheck35">
                            大規模(10,000人~29,999人)
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="groupCheck35">
                        <label class="form-check-label" for="groupCheck35">
                            超大規模(30,000人~)
                        </label>
                        </div>
                    </div>    
                </form>
            </div>
        </div>

        <div class="conditions5">
            <div class="box">
                    <div class="tooltip-container3">
                        <span class="tooltip-trigger">？</span>
                        <div class="tooltip-content">
                        現在、GPAデータを準備中です。近日中に利用可能になります。
                        </div>
                    </div>   
                    <div class="line-header5">
                    <h1><i class="fa fa-file-alt me-2"></i>入学者平均GPA（準備中）</h1>
                    </div>
                <form>
                    <div class="form-group4">
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="gpaRadios" id="gpaRadio1" value="option1" checked disabled>
                        <label class="form-check-label disabled-label" for="gpaRadio1">
                            指定しない（データ準備中）
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="gpaRadios" id="gpaRadio2" value="option2" disabled>
                        <label class="form-check-label disabled-label" for="gpaRadio2">
                            0~2.49
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="gpaRadios" id="gpaRadio3" value="option3" disabled>
                        <label class="form-check-label disabled-label" for="gpaRadio3">
                            2.50~2.99
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="gpaRadios" id="gpaRadio4" value="option4" disabled>
                        <label class="form-check-label disabled-label" for="gpaRadio4">
                            3.00~3.49
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="gpaRadios" id="gpaRadio5" value="option5" disabled>
                        <label class="form-check-label disabled-label" for="gpaRadio5">
                            3.50~3.74
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="gpaRadios" id="gpaRadio6" value="option6" disabled>
                        <label class="form-check-label disabled-label" for="gpaRadio6">
                            3.75~
                        </label>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="conditions6">
            <div class="box">
                    <div class="tooltip-container4">
                        <span class="tooltip-trigger">？</span>
                        <div class="tooltip-content">
                        現在、NCAAデータを準備中です。近日中に利用可能になります。
                        </div>
                    </div> 
                    <div class="line-header6">
                    <h1><i class="fa fa-baseball-ball me-2"></i>NCAA Division（準備中）</h1>  
                    </div>
                <form>
                    <div class="form-group5">
                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="ncaaCheck1" disabled>
                        <label class="form-check-label disabled-label" for="ncaaCheck1">
                            Division Ⅰ（データ準備中）
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="ncaaCheck2" disabled>
                        <label class="form-check-label disabled-label" for="ncaaCheck2">
                            Division Ⅱ（データ準備中）
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="ncaaCheck3" disabled>
                        <label class="form-check-label disabled-label" for="ncaaCheck3">
                            Division Ⅲ（データ準備中）
                        </label>
                        </div>
                    </div>    
                </form>
            </div>
        </div>


        <div class="conditions7">
            <div class="box">
                    <div class="tooltip-container5">
                        <span class="tooltip-trigger">？</span>
                        <div class="tooltip-content">
                        難関大学ほど卒業率が高くなる傾向にあります。
                        </div>
                    </div> 
                    <div class="line-header7">
                        <h1><i class="fa fa-graduation-cap me-2"></i>卒業率</h1>
                    </div>
                <form>
                    <div class="form-group6">
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="graduationRadios" id="gradRadio1" value="option1" checked>
                        <label class="form-check-label" for="gradRadio1">
                        指定しない
                        </label>
                        </div>
                            
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="graduationRadios" id="gradRadio2" value="option2">
                        <label class="form-check-label" for="gradRadio2">
                        50%~
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="graduationRadios" id="gradRadio3" value="option3">
                        <label class="form-check-label" for="gradRadio3">
                        60%~
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="graduationRadios" id="gradRadio4" value="option4">
                        <label class="form-check-label" for="gradRadio4">
                        70%~
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="graduationRadios" id="gradRadio5" value="option5">
                        <label class="form-check-label" for="gradRadio5">
                        80%~
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="graduationRadios" id="gradRadio6" value="option6">
                        <label class="form-check-label" for="gradRadio6">
                        90%~
                        </label>
                        </div>
                    </div>
                </form>
            </div>
        </div>


        <div class="conditions8">
            <div class="box">
                <div class="line-header8">
                <h1><i class="fa fa-map-marker-alt me-2"></i>大学の立地</h1>    
                </div>
                <form>
                    <div class="form-group7">
                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="urbanCheck1">
                        <label class="form-check-label" for="urbanCheck1">
                            都市部
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="urbanCheck2">
                        <label class="form-check-label" for="urbanCheck2">
                            郊外
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="urbanCheck3">
                        <label class="form-check-label" for="urbanCheck3">
                            町
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="urbanCheck4">
                        <label class="form-check-label" for="urbanCheck4">
                            田舎
                        </label>
                        </div>
                    </div>    
                </form>
            </div>
        </div>
    </div>



    <div class="contents1">
        <div class="conditions9">
            <div class="box1">
                <div class="tooltip-container6">
                    <span class="tooltip-trigger1">？</span>
                    <div class="tooltip-content">
                        アメリカの大学では、2つ以上の分野を専攻することができます。また、副専攻として学ぶこともできます。文理の壁がほとんどないため、全く異なる分野を同時に学ぶことができます。
                    </div>
                </div>
                <div class="line-header7-major">
                <h1><i class="fa fa-flask me-2"></i><strong>専攻</strong></h1>
                </div>
                <div class="options">
                    <label><input type="checkbox" name="major" value="biology"> 生物学</label>
                    <label><input type="checkbox" name="major" value="education"> 教育学</label>
                    <label><input type="checkbox" name="major" value="political"> 政治学</label>
                    <label><input type="checkbox" name="major" value="mathematics"> 数学</label>
                    <label><input type="checkbox" name="major" value="physics"> 物理学</label>
                    <label><input type="checkbox" name="major" value="economics"> 経済学</label>
                    <label><input type="checkbox" name="major" value="music"> 音楽</label>
                    <label><input type="checkbox" name="major" value="agriculture"> 農学</label>
                    <label><input type="checkbox" name="major" value="business"> 経営学</label>
                    <label><input type="checkbox" name="major" value="psychology"> 心理学</label>
                    <label><input type="checkbox" name="major" value="social"> 社会学</label>
                    <label><input type="checkbox" name="major" value="environmental"> 環境学</label>
                    <label><input type="checkbox" name="major" value="architecture"> 建築学</label>
                    <label><input type="checkbox" name="major" value="chemistry"> 化学</label>
                    <label><input type="checkbox" name="major" value="ethics"> 倫理学</label>
                    <label><input type="checkbox" name="major" value="history"> 歴史学</label>
                    <label><input type="checkbox" name="major" value="graphic_design"> グラフィックデザイン</label>
                    <label><input type="checkbox" name="major" value="engineering"> 工学(エンジニアリング)</label>
                    <label><input type="checkbox" name="major" value="criminal_justice"> 刑事司法</label>
                    <label><input type="checkbox" name="major" value="communication"> コミュニケーション学</label>
                    <label><input type="checkbox" name="major" value="theater"> 演劇</label>
                    <label><input type="checkbox" name="major" value="geography"> 地理学</label>
                    <label><input type="checkbox" name="major" value="statistics"> 統計学</label>
                    <label><input type="checkbox" name="major" value="public_health"> 公衆衛生学</label>
                    <label><input type="checkbox" name="major" value="philosophy"> 哲学</label>
                    <label><input type="checkbox" name="major" value="international"> 国際関係学</label>
                    <label><input type="checkbox" name="major" value="forensics"> 法医学</label>
                    <label><input type="checkbox" name="major" value="religion"> 宗教学</label>
                    <label><input type="checkbox" name="major" value="spanish"> スペイン語</label>
                </div>
            </div>
        </div>
    </div>

    <div class="search-button-container">
        <button class="cool-search-button" id="search-button"><i class="fa fa-search"></i> 検索</button>
    </div>


    <script>
        // 大学名入力フィールドと条件検索フィールドの干渉を防ぐ
        const collegeNameInput = document.getElementById('college-name-input');
        const conditionInputs = document.querySelectorAll('.conditions1 select, .conditions2 input, .conditions3 input, .conditions4 input, .conditions5 input, .conditions6 input, .conditions7 input, .conditions8 input, .conditions9 input, input[name="tuitionRadios"], input[name="major"]');
        const nameSearchButton = document.getElementById('name-search-button');
        const conditionSearchButton = document.getElementById('search-button');

        // 大学名入力時に条件検索をリセット・無効化
        collegeNameInput.addEventListener('input', function() {
            if (this.value.trim() !== '') {
                // 条件検索フィールドを無効化
                conditionInputs.forEach(input => {
                    input.disabled = true;
                    input.style.opacity = '0.5';
                });
                conditionSearchButton.disabled = true;
                conditionSearchButton.style.opacity = '0.5';
                
                // ドロップダウンボタンも無効化
                const dropdownButton = document.getElementById('dropdownMenuButton');
                dropdownButton.disabled = true;
                dropdownButton.style.opacity = '0.5';
            } else {
                // 大学名が空の場合、条件検索を有効化
                conditionInputs.forEach(input => {
                    input.disabled = false;
                    input.style.opacity = '1';
                });
                conditionSearchButton.disabled = false;
                conditionSearchButton.style.opacity = '1';
                
                const dropdownButton = document.getElementById('dropdownMenuButton');
                dropdownButton.disabled = false;
                dropdownButton.style.opacity = '1';
            }
        });

        // 条件検索フィールドに入力時に大学名検索を無効化
        conditionInputs.forEach(input => {
            input.addEventListener('change', function() {
                const hasConditionInput = Array.from(conditionInputs).some(inp => {
                    if (inp.type === 'radio' || inp.type === 'checkbox') {
                        return inp.checked && inp.value !== 'option1'; // デフォルト値以外が選択されている
                    }
                    return inp.value && inp.value.trim() !== '';
                });

                if (hasConditionInput) {
                    collegeNameInput.disabled = true;
                    collegeNameInput.style.opacity = '0.5';
                    nameSearchButton.disabled = true;
                    nameSearchButton.style.opacity = '0.5';
                } else {
                    collegeNameInput.disabled = false;
                    collegeNameInput.style.opacity = '1';
                    nameSearchButton.disabled = false;
                    nameSearchButton.style.opacity = '1';
                }
            });
        });

        // 授業料ラジオボタンのイベントリスナーを追加
        document.querySelectorAll('input[name="tuitionRadios"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const hasConditionInput = Array.from(conditionInputs).some(inp => {
                    if (inp.type === 'radio' || inp.type === 'checkbox') {
                        return inp.checked && inp.value !== 'option1';
                    }
                    return inp.value && inp.value.trim() !== '';
                });

                if (hasConditionInput) {
                    collegeNameInput.disabled = true;
                    collegeNameInput.style.opacity = '0.5';
                    nameSearchButton.disabled = true;
                    nameSearchButton.style.opacity = '0.5';
                } else {
                    collegeNameInput.disabled = false;
                    collegeNameInput.style.opacity = '1';
                    nameSearchButton.disabled = false;
                    nameSearchButton.style.opacity = '1';
                }
            });
        });


        // 大学名検索機能
        document.getElementById('name-search-button').addEventListener('click', function () {
            const collegeName = document.getElementById('college-name-input').value.trim();
            if (collegeName) {
                // 大学名検索用のクエリパラメータを作成
                const queryString = new URLSearchParams({
                    college_name: collegeName
                }).toString();
                
                // 検索結果ページにリダイレクト
                window.location.href = `/results?${queryString}`;
            } else {
                alert('大学名を入力してください');
            }
        });

        // Enterキーでも検索できるようにする
        document.getElementById('college-name-input').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                document.getElementById('name-search-button').click();
            }
        });

        // 専攻チェックボックスのイベントリスナーを追加
        document.querySelectorAll('input[name="major"]').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const hasConditionInput = Array.from(conditionInputs).some(inp => {
                    if (inp.type === 'radio' || inp.type === 'checkbox') {
                        return inp.checked && inp.value !== 'option1';
                    }
                    return inp.value && inp.value.trim() !== '';
                });

                if (hasConditionInput) {
                    collegeNameInput.disabled = true;
                    collegeNameInput.style.opacity = '0.5';
                    nameSearchButton.disabled = true;
                    nameSearchButton.style.opacity = '0.5';
                } else {
                    collegeNameInput.disabled = false;
                    collegeNameInput.style.opacity = '1';
                    nameSearchButton.disabled = false;
                    nameSearchButton.style.opacity = '1';
                }
            });
        });

        document.getElementById('search-button').addEventListener('click', function () {

            // 隠し要素から選択された州の値を取得
            const selectedStateValue = document.getElementById('selectedState').value;

            const formData = {
                state: selectedStateValue,
                privateorpublic: document.querySelector('input[name="exampleRadios"]:checked')?.nextElementSibling?.innerText.trim(),
                tuition: document.querySelector('input[name="tuitionRadios"]:checked')?.nextElementSibling?.innerText.trim(),
                students: Array.from(document.querySelectorAll('.form-group3 input:checked')).map(cb => cb.nextElementSibling?.innerText.trim()),
                gpa: '指定しない', // 現在データなしのため
                Division: [], // 現在データなしのため
                graduation_rate: document.querySelector('.form-group6 input:checked')?.nextElementSibling?.innerText.trim(),
                urbanicity: Array.from(document.querySelectorAll('.form-group7 input:checked')).map(cb => cb.nextElementSibling?.innerText.trim()),
                
                // majorの取得方法を修正
                major: Array.from(document.querySelectorAll('input[name="major"]:checked'))
                    .map(cb => cb.value) // value属性を取得
                    .filter(value => value !== "") // 空の値を除外
            };

            // majorが選択されていない場合の処理
            if (formData.major.length === 0) {
                formData.major = "未選択"; // もし選択されていなければ、"未選択" を送信
            }

            // クエリ文字列を作成
            const queryString = new URLSearchParams(formData).toString();

            // クエリ文字列を使ってリダイレクト
            window.location.href = `/results?${queryString}`;
        });
    </script>

</div> 


