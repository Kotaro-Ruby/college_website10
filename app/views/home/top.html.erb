
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">



    
<div class ="main">
    <div class="copy-container">
    <h1>College Spark</h1>
    <h2>~あなたにぴったりのアメリカの大学を見つけよう~</h2>
    
    <!-- 詳細サイト説明セクション -->
    <div class="site-description">
        <div class="description-intro">
            <div class="intro-card">
                <div class="intro-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div class="intro-content">
                    <h3>アメリカ大学留学を成功に導く、最も包括的な大学検索プラットフォーム</h3>
                    <p>College Sparkは、アメリカの4年制大学4,000校以上の詳細データを網羅した日本最大級の大学検索サイトです。ハーバード大学、スタンフォード大学、MIT、UC Berkeley、NYUなど、世界トップレベルの大学から、隠れた名門校まで、あなたの夢と条件にぴったりの大学を見つけることができます。</p>
                </div>
            </div>
        </div>

        <div class="why-choose-us">
            <h3><i class="fas fa-star"></i>なぜCollege Sparkが選ばれるのか</h3>
            <div class="advantages-grid">
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-database"></i>
                    </div>
                    <h4>圧倒的なデータ量</h4>
                    <p>4,000校以上の大学データを収録。学費、合格率、SAT/ACTスコア、専攻情報、卒業後の収入データまで、大学選びに必要な全ての情報を網羅しています。</p>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-search-plus"></i>
                    </div>
                    <h4>多角的検索機能</h4>
                    <p>州、学費範囲、専攻分野、入学難易度、学生数、立地環境など、20以上の条件で詳細検索が可能。あなたの優先順位に合わせて最適な大学を絞り込めます。</p>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-yen-sign"></i>
                    </div>
                    <h4>正確な学費情報</h4>
                    <p>州立大学の州外生料金、私立大学のNet Price（実質費用）を正確に表示。奨学金情報も含めた実際の負担額を把握できます。</p>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h4>入学データ分析</h4>
                    <p>合格率、SAT/ACTスコア分布、GPA要件など、入学に必要な統計データを詳細に分析。あなたの学力に適した大学選びをサポートします。</p>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <h4>専攻分野完全網羅</h4>
                    <p>工学、経営学、コンピューターサイエンス、心理学、生物学など16の主要分野を網羅。各専攻で強い大学をランキング形式で紹介します。</p>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h4>使いやすいインターフェース</h4>
                    <p>スマートフォン、タブレット、PCに完全対応。直感的な操作で、いつでもどこでも大学情報にアクセスできます。</p>
                </div>
            </div>
        </div>

        <div class="target-users">
            <h3><i class="fas fa-users"></i>こんな方におすすめ</h3>
            <div class="users-grid">
                <div class="user-item">
                    <i class="fas fa-user-graduate"></i>
                    <h4>高校生・受験生</h4>
                    <p>アメリカの大学進学を考えている高校生。学力や予算に合った大学を効率的に見つけたい方。</p>
                </div>
                <div class="user-item">
                    <i class="fas fa-exchange-alt"></i>
                    <h4>編入を検討中の学生</h4>
                    <p>日本の大学やコミュニティカレッジからアメリカの4年制大学への編入を考えている方。</p>
                </div>
                <div class="user-item">
                    <i class="fas fa-heart"></i>
                    <h4>保護者の方</h4>
                    <p>お子さんの海外大学進学をサポートしたい保護者。学費や安全性を重視した大学選びをしたい方。</p>
                </div>
                <div class="user-item">
                    <i class="fas fa-briefcase"></i>
                    <h4>社会人・キャリアチェンジ</h4>
                    <p>キャリアアップのためMBAや専門学位取得を目指す社会人の方。</p>
                </div>
            </div>
        </div>

        <div class="how-to-use-detailed">
            <h3><i class="fas fa-route"></i>College Spark活用ガイド</h3>
            <div class="steps-detailed">
                <div class="step-detailed">
                    <div class="step-number-large">1</div>
                    <div class="step-content">
                        <h4>興味のある大学を検索</h4>
                        <p>大学名での直接検索、または詳細条件での絞り込み検索を選択。まずは広く候補を探してみましょう。</p>
                    </div>
                </div>
                <div class="step-detailed">
                    <div class="step-number-large">2</div>
                    <div class="step-content">
                        <h4>詳細情報を比較検討</h4>
                        <p>気になる大学の学費、合格率、専攻の強さ、キャンパス環境などを詳しく比較。お気に入り機能で候補を保存できます。</p>
                    </div>
                </div>
                <div class="step-detailed">
                    <div class="step-number-large">3</div>
                    <div class="step-content">
                        <h4>出願戦略を立てる</h4>
                        <p>あなたの学力レベルに応じて、安全校・適正校・チャレンジ校のバランスを考慮した出願校リストを作成しましょう。</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="success-message">
            <div class="success-icon">
                <i class="fas fa-rocket"></i>
            </div>
            <div class="success-content">
                <h3>あなたの夢のアメリカ大学生活をCollege Sparkがサポートします</h3>
                <p>世界トップレベルの教育環境、多様な価値観との出会い、グローバルな人脈形成。アメリカ大学留学で得られる経験は、あなたの人生を大きく変える可能性を秘めています。</p>
            </div>
        </div>
    </div>
    
    <!-- 大学名検索機能 -->
    <div class="college-name-search">
        <div class="search-header">
            <h3><i class="fa fa-search me-2"></i>大学名で直接検索</h3>
        </div>
        <div class="search-input-container">
            <input type="text" id="college-name-input" placeholder="例：Harvard University, Stanford University..." class="college-search-input">
            <button id="name-search-button" class="name-search-btn">
                <i class="fa fa-search"></i> 検索
            </button>
        </div>
        <div class="search-separator">
            <span>または</span>
        </div>
    </div>
    
    <!-- 最近閲覧した大学 -->
    <% if recently_viewed_colleges.any? %>
        <div class="recently-viewed-section">
            <div class="recently-viewed-header">
                <h3><i class="fa fa-history me-2"></i>最近閲覧した大学</h3>
                <p>最近見た大学をもう一度チェック！</p>
            </div>
            <div class="recently-viewed-colleges">
                <% recently_viewed_colleges.each do |college| %>
                    <div class="recently-viewed-card">
                        <%= link_to conditions_path(college.slug || college.id), class: "college-card-link" do %>
                            <div class="college-card-content">
                                <div class="college-basic-info">
                                    <h4 class="college-name"><%= college.college %></h4>
                                    <p class="college-location">
                                        <i class="fas fa-map-marker-alt"></i>
                                        <%= college.state %>州
                                    </p>
                                </div>
                                <div class="college-stats">
                                    <div class="stat-item">
                                        <span class="stat-label">授業料</span>
                                        <span class="stat-value">
                                            <%= if college.privateorpublic == "州立" || college.privateorpublic == "Public"
                                                  if college.tuition_out_state.present?
                                                    "$#{number_with_delimiter(college.tuition_out_state)}"
                                                  elsif college.tuition.present?
                                                    "$#{number_with_delimiter(college.tuition)}"
                                                  else
                                                    "N/A"
                                                  end
                                                else
                                                  college.tuition ? "$#{number_with_delimiter(college.tuition)}" : "N/A"
                                                end %>
                                        </span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">合格率</span>
                                        <span class="stat-value">
                                            <%= college.acceptance_rate ? "#{(college.acceptance_rate * 100).round}%" : "N/A" %>
                                        </span>
                                    </div>
                                </div>
                                <div class="card-arrow">
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                            </div>
                        <% end %>
                    </div>
                <% end %>
            </div>
        </div>
    <% end %>
    
    </div>

    <div class="contents">
        <div class="conditions1">
            <div class="box">
                <div class="line-header1">
                <h1><i class="fa fa-globe-americas me-2"></i>州</h1>
                </div>      
                <div class="custom-dropdown">
                    <button class="custom-dropdown-btn" id="dropdownMenuButton" type="button">
                        選択してください
                        <span class="dropdown-arrow">▼</span>
                    </button>
                    <input type="hidden" id="selectedState" value="選択してください">
                    <div class="custom-dropdown-menu" id="dropdownMenu">
                        <div class="dropdown-item" data-value="指定しない">指定しない</div>
                        <div class="dropdown-item" data-value="アラバマ州(AL)">アラバマ州(AL)</div>
                        <div class="dropdown-item" data-value="アラスカ州(AK)">アラスカ州(AK)</div>
                        <div class="dropdown-item" data-value="アリゾナ州(AZ)">アリゾナ州(AZ)</div>
                        <div class="dropdown-item" data-value="アーカンソー州(AR)">アーカンソー州(AR)</div>
                        <div class="dropdown-item" data-value="カリフォルニア州(CA)">カリフォルニア州(CA)</div>
                        <div class="dropdown-item" data-value="コロラド州(CO)">コロラド州(CO)</div>
                        <div class="dropdown-item" data-value="コネチカット州(CT)">コネチカット州(CT)</div>
                        <div class="dropdown-item" data-value="デラウェア州(DE)">デラウェア州(DE)</div>
                        <div class="dropdown-item" data-value="コロンビア特別区(DC)">コロンビア特別区(DC)</div>
                        <div class="dropdown-item" data-value="フロリダ州(FL)">フロリダ州(FL)</div>
                        <div class="dropdown-item" data-value="ジョージア州(GA)">ジョージア州(GA)</div>
                        <div class="dropdown-item" data-value="ハワイ州(HI)">ハワイ州(HI)</div>
                        <div class="dropdown-item" data-value="アイダホ州(ID)">アイダホ州(ID)</div>
                        <div class="dropdown-item" data-value="イリノイ州(IL)">イリノイ州(IL)</div>
                        <div class="dropdown-item" data-value="インディアナ州(IN)">インディアナ州(IN)</div>
                        <div class="dropdown-item" data-value="アイオワ州(IA)">アイオワ州(IA)</div>
                        <div class="dropdown-item" data-value="カンザス州(KS)">カンザス州(KS)</div>
                        <div class="dropdown-item" data-value="ケンタッキー州(KY)">ケンタッキー州(KY)</div>
                        <div class="dropdown-item" data-value="ルイジアナ州(LA)">ルイジアナ州(LA)</div>
                        <div class="dropdown-item" data-value="メイン州(ME)">メイン州(ME)</div>
                        <div class="dropdown-item" data-value="メリーランド州(MD)">メリーランド州(MD)</div>
                        <div class="dropdown-item" data-value="マサチューセッツ州(MA)">マサチューセッツ州(MA)</div>
                        <div class="dropdown-item" data-value="ミシガン州(MI)">ミシガン州(MI)</div>
                        <div class="dropdown-item" data-value="ミネソタ州(MN)">ミネソタ州(MN)</div>
                        <div class="dropdown-item" data-value="ミシシッピ州(MS)">ミシシッピ州(MS)</div>
                        <div class="dropdown-item" data-value="ミズーリ州(MO)">ミズーリ州(MO)</div>
                        <div class="dropdown-item" data-value="モンタナ州(MT)">モンタナ州(MT)</div>
                        <div class="dropdown-item" data-value="ネブラスカ州(NE)">ネブラスカ州(NE)</div>
                        <div class="dropdown-item" data-value="ネバダ州(NV)">ネバダ州(NV)</div>
                        <div class="dropdown-item" data-value="ニューハンプシャー州(NH)">ニューハンプシャー州(NH)</div>
                        <div class="dropdown-item" data-value="ニュージャージー州(NJ)">ニュージャージー州(NJ)</div>
                        <div class="dropdown-item" data-value="ニューメキシコ州(NM)">ニューメキシコ州(NM)</div>
                        <div class="dropdown-item" data-value="ニューヨーク州(NY)">ニューヨーク州(NY)</div>
                        <div class="dropdown-item" data-value="ノースカロライナ州(NC)">ノースカロライナ州(NC)</div>
                        <div class="dropdown-item" data-value="ノースダコタ州(ND)">ノースダコタ州(ND)</div>
                        <div class="dropdown-item" data-value="オハイオ州(OH)">オハイオ州(OH)</div>
                        <div class="dropdown-item" data-value="オクラホマ州(OK)">オクラホマ州(OK)</div>
                        <div class="dropdown-item" data-value="オレゴン州(OR)">オレゴン州(OR)</div>
                        <div class="dropdown-item" data-value="ペンシルベニア州(PA)">ペンシルベニア州(PA)</div>
                        <div class="dropdown-item" data-value="ロードアイランド州(RI)">ロードアイランド州(RI)</div>
                        <div class="dropdown-item" data-value="サウスカロライナ州(SC)">サウスカロライナ州(SC)</div>
                        <div class="dropdown-item" data-value="サウスダコタ州(SD)">サウスダコタ州(SD)</div>
                        <div class="dropdown-item" data-value="テネシー州(TN)">テネシー州(TN)</div>
                        <div class="dropdown-item" data-value="テキサス州(TX)">テキサス州(TX)</div>
                        <div class="dropdown-item" data-value="ユタ州(UT)">ユタ州(UT)</div>
                        <div class="dropdown-item" data-value="バーモント州(VT)">バーモント州(VT)</div>
                        <div class="dropdown-item" data-value="バージニア州(VA)">バージニア州(VA)</div>
                        <div class="dropdown-item" data-value="ワシントン州(WA)">ワシントン州(WA)</div>
                        <div class="dropdown-item" data-value="ウェストバージニア州(WV)">ウェストバージニア州(WV)</div>
                        <div class="dropdown-item" data-value="ウィスコンシン州(WI)">ウィスコンシン州(WI)</div>
                        <div class="dropdown-item" data-value="ワイオミング州(WY)">ワイオミング州(WY)</div>
                    </div>    
                </div>                   
            </div>
        </div>
        <style>
        .custom-dropdown {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .custom-dropdown-btn {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 12px 16px;
            width: 100%;
            text-align: left;
            font-size: 16px;
            color: #495057;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .custom-dropdown-btn:hover {
            border-color: #adb5bd;
            background: #e9ecef;
        }

        .custom-dropdown-btn:focus {
            outline: none;
            border-color: #80bdff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }

        .dropdown-arrow {
            transition: transform 0.3s ease;
            font-size: 12px;
        }

        .custom-dropdown.active .dropdown-arrow {
            transform: rotate(180deg);
        }

        .custom-dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #dee2e6;
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .custom-dropdown-menu.dropup {
            top: auto;
            bottom: 100%;
            border-top: 2px solid #dee2e6;
            border-bottom: none;
            border-radius: 8px 8px 0 0;
            box-shadow: 0 -4px 6px rgba(0, 0, 0, 0.1);
        }

        .custom-dropdown.active .custom-dropdown-menu {
            display: block;
        }

        .dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            border-bottom: 1px solid #f8f9fa;
            color: #495057;
            transition: background-color 0.2s ease;
        }

        .dropdown-item:hover {
            background-color: #f8f9fa;
            color: #212529;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        /* 最近閲覧した大学セクション */
        .recently-viewed-section {
            background: linear-gradient(135deg, #fff5e6 0%, #ffe0b3 100%);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 8px 32px rgba(251, 146, 60, 0.1);
            border: 1px solid rgba(251, 146, 60, 0.1);
        }

        .recently-viewed-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .recently-viewed-header h3 {
            color: #fb923c;
            font-size: 1.6rem;
            font-weight: 700;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .recently-viewed-header p {
            color: #9a3412;
            font-size: 1rem;
            margin: 0;
            opacity: 0.8;
        }

        .recently-viewed-colleges {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .recently-viewed-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .recently-viewed-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }

        .college-card-link {
            text-decoration: none;
            color: inherit;
            display: block;
        }

        .college-card-content {
            padding: 20px;
            position: relative;
        }

        .college-basic-info {
            margin-bottom: 16px;
        }

        .college-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2d3748;
            margin: 0 0 6px 0;
            line-height: 1.3;
        }

        .college-location {
            color: #6b7280;
            font-size: 0.9rem;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .college-location i {
            color: #fb923c;
            font-size: 0.8rem;
        }

        .college-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 12px;
        }

        .stat-item {
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }

        .stat-label {
            display: block;
            font-size: 0.75rem;
            color: #6b7280;
            font-weight: 500;
            margin-bottom: 2px;
        }

        .stat-value {
            font-size: 0.9rem;
            font-weight: 600;
            color: #fb923c;
        }

        .card-arrow {
            position: absolute;
            top: 50%;
            right: 16px;
            transform: translateY(-50%);
            color: #fb923c;
            font-size: 1.2rem;
            opacity: 0.7;
            transition: all 0.3s ease;
        }

        .recently-viewed-card:hover .card-arrow {
            opacity: 1;
            transform: translateY(-50%) translateX(4px);
        }

        /* レスポンシブ対応 */
        @media (max-width: 768px) {
            .recently-viewed-section {
                padding: 20px;
                margin: 20px 0;
            }

            .recently-viewed-header h3 {
                font-size: 1.4rem;
                flex-direction: column;
                gap: 8px;
            }

            .recently-viewed-colleges {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .college-card-content {
                padding: 16px;
            }

            .college-name {
                font-size: 1rem;
            }

            .college-stats {
                gap: 8px;
            }

            .stat-item {
                padding: 6px;
            }

            .stat-label {
                font-size: 0.7rem;
            }

            .stat-value {
                font-size: 0.85rem;
            }
        }

        @media (max-width: 480px) {
            .recently-viewed-section {
                padding: 16px;
            }

            .recently-viewed-header h3 {
                font-size: 1.2rem;
            }

            .college-stats {
                grid-template-columns: 1fr;
                gap: 6px;
            }
        }
        </style>

        <script>
        document.addEventListener('DOMContentLoaded', function () {
            const dropdownBtn = document.getElementById('dropdownMenuButton');
            const dropdownMenu = document.getElementById('dropdownMenu');
            const dropdownContainer = document.querySelector('.custom-dropdown');

            // ドロップダウンの位置を調整する関数
            function adjustDropdownPosition() {
                const rect = dropdownContainer.getBoundingClientRect();
                const windowHeight = window.innerHeight;
                const dropdownHeight = 300; // max-height値
                
                // 下方向に十分なスペースがあるかチェック
                const spaceBelow = windowHeight - rect.bottom;
                const spaceAbove = rect.top;
                
                if (spaceBelow < dropdownHeight && spaceAbove > spaceBelow) {
                    // 下にスペースがなく、上にスペースがある場合は上方向に表示
                    dropdownMenu.classList.add('dropup');
                } else {
                    // 通常は下方向に表示
                    dropdownMenu.classList.remove('dropup');
                }
            }

            // ドロップダウンボタンクリック処理
            dropdownBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                
                if (dropdownContainer.classList.contains('active')) {
                    dropdownContainer.classList.remove('active');
                } else {
                    adjustDropdownPosition();
                    dropdownContainer.classList.add('active');
                }
            });

            // ドロップダウンアイテムクリック処理
            document.querySelectorAll('.dropdown-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const selectedText = this.textContent.trim();
                    const selectedValue = this.getAttribute('data-value');
                    
                    // ボタンテキストを更新（矢印は保持）
                    dropdownBtn.innerHTML = selectedText + ' <span class="dropdown-arrow">▼</span>';
                    
                    // 隠し要素に選択された値を保存
                    document.getElementById('selectedState').value = selectedValue;
                    
                    // ドロップダウンを閉じる
                    dropdownContainer.classList.remove('active');
                    
                    // 相互排他処理: 州が選択された場合は大学名検索を無効化
                    const collegeNameInput = document.getElementById('college-name-input');
                    const nameSearchButton = document.getElementById('name-search-button');
                    
                    if (selectedText !== '指定しない' && selectedText !== '選択してください') {
                        collegeNameInput.disabled = true;
                        collegeNameInput.style.opacity = '0.5';
                        nameSearchButton.disabled = true;
                        nameSearchButton.style.opacity = '0.5';
                    } else {
                        // 他の条件入力がない場合は大学名検索を有効化
                        const conditionInputs = document.querySelectorAll('.conditions2 input, .conditions3 input, .conditions4 input, .conditions5 input, .conditions6 input, .conditions7 input, .conditions8 input, .conditions9 input, input[name="tuitionRadios"], input[name="satRadios"], input[name="actRadios"]');
                        const hasOtherConditions = Array.from(conditionInputs).some(inp => {
                            if (inp.type === 'radio' || inp.type === 'checkbox') {
                                return inp.checked && inp.value !== 'option1';
                            }
                            return inp.value && inp.value.trim() !== '';
                        });
                        
                        if (!hasOtherConditions) {
                            collegeNameInput.disabled = false;
                            collegeNameInput.style.opacity = '1';
                            nameSearchButton.disabled = false;
                            nameSearchButton.style.opacity = '1';
                        }
                    }
                });
            });

            // 外部クリックで閉じる
            document.addEventListener('click', function(e) {
                if (!dropdownContainer.contains(e.target)) {
                    dropdownContainer.classList.remove('active');
                }
            });

            // スクロール時にドロップダウンを閉じる
            window.addEventListener('scroll', function () {
                dropdownContainer.classList.remove('active');
            });
        });
        </script>

        <div class="conditions2">
            <div class="box">
                    <div class="tooltip-container1">
                        <span class="tooltip-trigger">？</span>
                        <div class="tooltip-content">
                        州立大学は、州民以外の学生に対して通常の2~3倍の学費を設定していることに注意が必要です。また、私立大学の方が多くの奨学金を受け取れる傾向にあります。
                        </div>
                    </div> 
                    <div class="line-header2">
                    <h1><i class="fa fa-university me-2"></i>私立/州立</h1>
                    </div>
                <form>
                    <div class="form-group1">
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="exampleRadios" id="radio1" value="option1" checked>
                        <label class="form-check-label" for="radio1">
                        指定しない
                        </label>
                        </div>
                        
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="exampleRadios" id="radio2" value="option2">
                        <label class="form-check-label" for="radio2">
                        私立
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="exampleRadios" id="radio3" value="option3">
                        <label class="form-check-label" for="radio3">
                        州立
                        </label>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="conditions3">
            <div class="box">
                    <div class="tooltip-container2">
                        <span class="tooltip-trigger">？</span>
                        <div class="tooltip-content">
                        州立大学は州外生向け料金、私立大学はNet Price（実質費用）を表示しています。
                        </div>
                    </div> 
                    <div class="line-header3">
                    <h1><i class="fa fa-dollar-sign me-2"></i>年間授業料</h1>
                    </div>
                <form>
                    <div class="form-group2">
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="tuitionRadios" id="tuitionRadio1" value="option1" checked>
                        <label class="form-check-label" for="tuitionRadio1">
                            指定しない
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="tuitionRadios" id="tuitionRadio2" value="option2">
                        <label class="form-check-label" for="tuitionRadio2">
                            ~$9,999
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="tuitionRadios" id="tuitionRadio3" value="option3">
                        <label class="form-check-label" for="tuitionRadio3">
                            $10,000~$19,999
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="tuitionRadios" id="tuitionRadio4" value="option4">
                        <label class="form-check-label" for="tuitionRadio4">
                            $20,000~$29,999
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="tuitionRadios" id="tuitionRadio5" value="option5">
                        <label class="form-check-label" for="tuitionRadio5">
                            $30,000~$39,999
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="tuitionRadios" id="tuitionRadio6" value="option6">
                        <label class="form-check-label" for="tuitionRadio6">
                            $40,000~$49,999
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="tuitionRadios" id="tuitionRadio7" value="option7">
                        <label class="form-check-label" for="tuitionRadio7">
                            $50,000~$59,999
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="tuitionRadios" id="tuitionRadio8" value="option8">
                        <label class="form-check-label" for="tuitionRadio8">
                            $60,000~
                        </label>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="conditions4">
            <div class="box">
                <div class="line-header4">
                <h1><i class="fa fa-users me-2"></i>学生数</h1>    
                </div>
                <form>
                    <div class="form-group3">
                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="groupCheck33.1">
                        <label class="form-check-label" for="groupCheck33.1">
                            小規模(~2999人)
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="groupCheck35">
                        <label class="form-check-label" for="groupCheck35">
                            中規模(3000人~9999人)
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="groupCheck35">
                        <label class="form-check-label" for="groupCheck35">
                            大規模(10,000人~29,999人)
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="groupCheck35">
                        <label class="form-check-label" for="groupCheck35">
                            超大規模(30,000人~)
                        </label>
                        </div>
                    </div>    
                </form>
            </div>
        </div>

        <div class="conditions5">
            <div class="box">
                    <div class="tooltip-container3">
                        <span class="tooltip-trigger">？</span>
                        <div class="tooltip-content">
                        SATスコアの範囲で大学を絞り込むことができます。数学と読解の合計スコアで検索されます。
                        </div>
                    </div>   
                    <div class="line-header5">
                    <h1><i class="fa fa-file-alt me-2"></i>SAT総合スコア</h1>
                    </div>
                <form>
                    <div class="form-group4">
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="satRadios" id="satRadio1" value="option1" checked>
                        <label class="form-check-label" for="satRadio1">
                            指定しない
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="satRadios" id="satRadio2" value="option2">
                        <label class="form-check-label" for="satRadio2">
                            800~1000
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="satRadios" id="satRadio3" value="option3">
                        <label class="form-check-label" for="satRadio3">
                            1000~1200
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="satRadios" id="satRadio4" value="option4">
                        <label class="form-check-label" for="satRadio4">
                            1200~1400
                        </label>
                        </div>
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="satRadios" id="satRadio5" value="option5">
                        <label class="form-check-label" for="satRadio5">
                            1400~1600
                        </label>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="conditions6">
            <div class="box">
                    <div class="tooltip-container4">
                        <span class="tooltip-trigger">？</span>
                        <div class="tooltip-content">
                        ACTスコアの範囲で大学を絞り込むことができます。全科目の総合スコアで検索されます。
                        </div>
                    </div> 
                    <div class="line-header6">
                    <h1><i class="fa fa-pencil-alt me-2"></i>ACT総合スコア</h1>  
                    </div>
                <form>
                    <div class="form-group5">
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="actRadios" id="actRadio1" value="option1" checked>
                        <label class="form-check-label" for="actRadio1">
                            指定しない
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="actRadios" id="actRadio2" value="option2">
                        <label class="form-check-label" for="actRadio2">
                            10~15
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="actRadios" id="actRadio3" value="option3">
                        <label class="form-check-label" for="actRadio3">
                            16~20
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="actRadios" id="actRadio4" value="option4">
                        <label class="form-check-label" for="actRadio4">
                            21~25
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="actRadios" id="actRadio5" value="option5">
                        <label class="form-check-label" for="actRadio5">
                            26~30
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="actRadios" id="actRadio6" value="option6">
                        <label class="form-check-label" for="actRadio6">
                            31~36
                        </label>
                        </div>
                    </div>    
                </form>
            </div>
        </div>


        <div class="conditions7">
            <div class="box">
                    <div class="tooltip-container5">
                        <span class="tooltip-trigger">？</span>
                        <div class="tooltip-content">
                        難関大学ほど卒業率が高くなる傾向にあります。
                        </div>
                    </div> 
                    <div class="line-header7">
                        <h1><i class="fa fa-graduation-cap me-2"></i>卒業率</h1>
                    </div>
                <form>
                    <div class="form-group6">
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="graduationRadios" id="gradRadio1" value="option1" checked>
                        <label class="form-check-label" for="gradRadio1">
                        指定しない
                        </label>
                        </div>
                            
                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="graduationRadios" id="gradRadio2" value="option2">
                        <label class="form-check-label" for="gradRadio2">
                        50%~
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="graduationRadios" id="gradRadio3" value="option3">
                        <label class="form-check-label" for="gradRadio3">
                        60%~
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="graduationRadios" id="gradRadio4" value="option4">
                        <label class="form-check-label" for="gradRadio4">
                        70%~
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="graduationRadios" id="gradRadio5" value="option5">
                        <label class="form-check-label" for="gradRadio5">
                        80%~
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="radio" name="graduationRadios" id="gradRadio6" value="option6">
                        <label class="form-check-label" for="gradRadio6">
                        90%~
                        </label>
                        </div>
                    </div>
                </form>
            </div>
        </div>


        <div class="conditions8">
            <div class="box">
                <div class="line-header8">
                <h1><i class="fa fa-map-marker-alt me-2"></i>大学の立地</h1>    
                </div>
                <form>
                    <div class="form-group7">
                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="urbanCheck1" value="大都市">
                        <label class="form-check-label" for="urbanCheck1">
                            大都市
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="urbanCheck2" value="都市部近郊">
                        <label class="form-check-label" for="urbanCheck2">
                            都市部近郊
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="urbanCheck3" value="小都市">
                        <label class="form-check-label" for="urbanCheck3">
                            小都市
                        </label>
                        </div>

                        <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="urbanCheck4" value="田舎">
                        <label class="form-check-label" for="urbanCheck4">
                            田舎
                        </label>
                        </div>
                    </div>    
                </form>
            </div>
        </div>
    </div>



    <div class="contents1">
        <div class="conditions9">
            <div class="box1">
                <div class="tooltip-container6">
                    <span class="tooltip-trigger1">？</span>
                    <div class="tooltip-content">
                        アメリカの大学では、2つ以上の分野を専攻することができます。また、副専攻として学ぶこともできます。文理の壁がほとんどないため、全く異なる分野を同時に学ぶことができます。
                    </div>
                </div>
                <div class="line-header7-major">
                <h1><i class="fa fa-flask me-2"></i><strong>専攻</strong></h1>
                </div>
                <div class="options">
                    <label><input type="checkbox" name="major" value="health_professions"> 健康・医療 (3,479校)</label>
                    <label><input type="checkbox" name="major" value="business"> 経営学 (2,829校)</label>
                    <label><input type="checkbox" name="major" value="computer_science"> コンピューターサイエンス (2,407校)</label>
                    <label><input type="checkbox" name="major" value="education"> 教育学 (1,995校)</label>
                    <label><input type="checkbox" name="major" value="visual_arts"> 視覚・舞台芸術 (1,926校)</label>
                    <label><input type="checkbox" name="major" value="biology"> 生物学 (1,726校)</label>
                    <label><input type="checkbox" name="major" value="psychology"> 心理学 (1,697校)</label>
                    <label><input type="checkbox" name="major" value="sociology"> 社会学 (1,517校)</label>
                    <label><input type="checkbox" name="major" value="social_sciences"> 社会科学 (1,496校)</label>
                    <label><input type="checkbox" name="major" value="english"> 英語・文学 (1,487校)</label>
                    <label><input type="checkbox" name="major" value="mathematics"> 数学・統計学 (1,344校)</label>
                    <label><input type="checkbox" name="major" value="history"> 歴史学 (1,323校)</label>
                    <label><input type="checkbox" name="major" value="engineering"> 工学 (1,093校)</label>
                    <label><input type="checkbox" name="major" value="philosophy"> 哲学・宗教学 (898校)</label>
                    <label><input type="checkbox" name="major" value="agriculture"> 農業・農学 (761校)</label>
                    <label><input type="checkbox" name="major" value="law"> 法学・刑事司法 (640校)</label>
                </div>
            </div>
        </div>
    </div>


    <div class="search-button-container">
        <button class="cool-search-button" id="search-button"><i class="fa fa-search"></i> 検索</button>
    </div>


    <script>

        // 大学名入力フィールドと条件検索フィールドの干渉を防ぐ
        const collegeNameInput = document.getElementById('college-name-input');
        const conditionInputs = document.querySelectorAll('.conditions1 select, .conditions2 input, .conditions3 input, .conditions4 input, .conditions5 input, .conditions6 input, .conditions7 input, .conditions8 input, .conditions9 input, input[name="tuitionRadios"], input[name="satRadios"], input[name="actRadios"], input[name="major"]');
        const nameSearchButton = document.getElementById('name-search-button');
        const conditionSearchButton = document.getElementById('search-button');

        // 大学名入力時に条件検索をリセット・無効化
        collegeNameInput.addEventListener('input', function() {
            if (this.value.trim() !== '') {
                // 条件検索フィールドを無効化
                conditionInputs.forEach(input => {
                    input.disabled = true;
                    input.style.opacity = '0.5';
                });
                conditionSearchButton.disabled = true;
                conditionSearchButton.style.opacity = '0.5';
                
                // ドロップダウンボタンも無効化
                const dropdownButton = document.getElementById('dropdownMenuButton');
                dropdownButton.disabled = true;
                dropdownButton.style.opacity = '0.5';
            } else {
                // 大学名が空の場合、条件検索を有効化
                conditionInputs.forEach(input => {
                    input.disabled = false;
                    input.style.opacity = '1';
                });
                conditionSearchButton.disabled = false;
                conditionSearchButton.style.opacity = '1';
                
                const dropdownButton = document.getElementById('dropdownMenuButton');
                dropdownButton.disabled = false;
                dropdownButton.style.opacity = '1';
            }
        });

        // 条件検索フィールドに入力時に大学名検索を無効化
        conditionInputs.forEach(input => {
            input.addEventListener('change', function() {
                const hasConditionInput = Array.from(conditionInputs).some(inp => {
                    if (inp.type === 'radio' || inp.type === 'checkbox') {
                        return inp.checked && inp.value !== 'option1'; // デフォルト値以外が選択されている
                    }
                    return inp.value && inp.value.trim() !== '';
                });

                if (hasConditionInput) {
                    collegeNameInput.disabled = true;
                    collegeNameInput.style.opacity = '0.5';
                    nameSearchButton.disabled = true;
                    nameSearchButton.style.opacity = '0.5';
                } else {
                    collegeNameInput.disabled = false;
                    collegeNameInput.style.opacity = '1';
                    nameSearchButton.disabled = false;
                    nameSearchButton.style.opacity = '1';
                }
            });
        });

        // 授業料・SAT・ACTラジオボタンのイベントリスナーを追加
        document.querySelectorAll('input[name="tuitionRadios"], input[name="satRadios"], input[name="actRadios"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const hasConditionInput = Array.from(conditionInputs).some(inp => {
                    if (inp.type === 'radio' || inp.type === 'checkbox') {
                        return inp.checked && inp.value !== 'option1';
                    }
                    return inp.value && inp.value.trim() !== '';
                });

                if (hasConditionInput) {
                    collegeNameInput.disabled = true;
                    collegeNameInput.style.opacity = '0.5';
                    nameSearchButton.disabled = true;
                    nameSearchButton.style.opacity = '0.5';
                } else {
                    collegeNameInput.disabled = false;
                    collegeNameInput.style.opacity = '1';
                    nameSearchButton.disabled = false;
                    nameSearchButton.style.opacity = '1';
                }
            });
        });


        // 大学名検索機能
        document.getElementById('name-search-button').addEventListener('click', function () {
            const collegeName = document.getElementById('college-name-input').value.trim();
            if (collegeName) {
                // 大学名検索用のクエリパラメータを作成
                const queryString = new URLSearchParams({
                    college_name: collegeName
                }).toString();
                
                // 検索結果ページにリダイレクト
                window.location.href = `/results?${queryString}`;
            } else {
                alert('大学名を入力してください');
            }
        });

        // Enterキーでも検索できるようにする
        document.getElementById('college-name-input').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                document.getElementById('name-search-button').click();
            }
        });

        // 専攻チェックボックスのイベントリスナーを追加
        document.querySelectorAll('input[name="major"]').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const hasConditionInput = Array.from(conditionInputs).some(inp => {
                    if (inp.type === 'radio' || inp.type === 'checkbox') {
                        return inp.checked && inp.value !== 'option1';
                    }
                    return inp.value && inp.value.trim() !== '';
                });

                if (hasConditionInput) {
                    collegeNameInput.disabled = true;
                    collegeNameInput.style.opacity = '0.5';
                    nameSearchButton.disabled = true;
                    nameSearchButton.style.opacity = '0.5';
                } else {
                    collegeNameInput.disabled = false;
                    collegeNameInput.style.opacity = '1';
                    nameSearchButton.disabled = false;
                    nameSearchButton.style.opacity = '1';
                }
            });
        });

        document.getElementById('search-button').addEventListener('click', function () {

            // 隠し要素から選択された州の値を取得
            const selectedStateValue = document.getElementById('selectedState').value;

            const formData = {
                state: selectedStateValue,
                privateorpublic: document.querySelector('input[name="exampleRadios"]:checked')?.nextElementSibling?.innerText.trim(),
                tuition: document.querySelector('input[name="tuitionRadios"]:checked')?.nextElementSibling?.innerText.trim(),
                students: Array.from(document.querySelectorAll('.form-group3 input:checked')).map(cb => cb.nextElementSibling?.innerText.trim()),
                sat_score: document.querySelector('input[name="satRadios"]:checked')?.nextElementSibling?.innerText.trim(),
                act_score: document.querySelector('input[name="actRadios"]:checked')?.nextElementSibling?.innerText.trim(),
                Division: [], // 現在データなしのため
                graduation_rate: document.querySelector('.form-group6 input:checked')?.nextElementSibling?.innerText.trim(),
                urbanicity: Array.from(document.querySelectorAll('.form-group7 input:checked')).map(cb => cb.value), // value属性を取得
                
                // majorの取得方法を修正
                major: Array.from(document.querySelectorAll('input[name="major"]:checked'))
                    .map(cb => cb.value) // value属性を取得
                    .filter(value => value !== "") // 空の値を除外
            };

            // majorが選択されていない場合の処理
            if (formData.major.length === 0) {
                formData.major = "未選択"; // もし選択されていなければ、"未選択" を送信
            }

            // クエリ文字列を作成
            const queryString = new URLSearchParams(formData).toString();

            // クエリ文字列を使ってリダイレクト
            window.location.href = `/results?${queryString}`;
        });
    </script>

</div> 


