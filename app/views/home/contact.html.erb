<div class="main">
  <div class="contact-container">
    <!-- Page Header -->
    <div class="page-header">
      <h1>お問い合わせ</h1>
      <p>College Sparkに関するご質問やご要望をお聞かせください。</p>
    </div>

    <!-- Contact Information -->
    <div class="contact-info">
      <h3>お問い合わせについて</h3>
      <p>College Sparkのサービスに関するご質問やご不明な点がございましたら、お気軽にお問い合わせください。</p>
      <p>皆様のご質問やご意見は、サービスの改善に活かしてまいります。</p>
      <p>お返事には数日お時間をいただく場合がございます。</p>
    </div>

    <!-- Important Information -->
    <div class="info-section">
      <h3>お問い合わせ前にご確認ください</h3>
      <ul class="info-list">
        <li>よくあるご質問についてはサイト内の情報をご確認ください</li>
        <li>技術的な問題については詳細をお教えいただけると助かります</li>
        <li>個人的なご相談には対応いたしかねる場合があります</li>
        <li>返信には少しお時間をいただく場合があります</li>
      </ul>
    </div>

    <!-- Contact Form -->
    <div class="contact-content">
      <form class="contact-form" action="/contact" method="post">
        <div class="form-group">
          <label for="name" class="form-label">お名前 <span class="required">*</span></label>
          <input type="text" id="name" name="name" class="form-input" required>
        </div>

        <div class="form-group">
          <label for="email" class="form-label">メールアドレス <span class="required">*</span></label>
          <input type="email" id="email" name="email" class="form-input" required>
          <div class="form-help">返信のために使用いたします。外部に公開することはありません。</div>
        </div>

        <div class="form-group">
          <label for="category" class="form-label">お問い合わせの種類 <span class="required">*</span></label>
          <select id="category" name="category" class="form-select" required>
            <option value="">選択してください</option>
            <option value="site-bug">サイトの不具合報告</option>
            <option value="data-error">データの間違い</option>
            <option value="feature-request">新機能のご要望</option>
            <option value="usage-question">使い方について</option>
            <option value="partnership">提携・協力について</option>
            <option value="other">その他</option>
          </select>
        </div>

        <div class="form-group">
          <label for="message" class="form-label">メッセージ <span class="required">*</span></label>
          <textarea id="message" name="message" class="form-textarea" rows="6" required placeholder="お問い合わせ内容をできるだけ詳しくお書きください。"></textarea>
        </div>

        <div class="form-group">
          <button type="submit" class="submit-button">送信する</button>
        </div>
      </form>
    </div>

    <!-- Privacy Note -->
    <div class="privacy-note">
      <h4>個人情報の取り扱いについて</h4>
      <p>お送りいただいた個人情報は、お問い合わせへの回答のためにのみ使用いたします。</p>
      <p>第三者への提供は一切行いません。</p>
    </div>

  </div>
</div>

<style>
    .contact-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    .page-header {
      text-align: center;
      margin-bottom: 50px;
      padding: 40px 20px;
      background: linear-gradient(135deg, rgb(240, 177, 61) 0%, rgb(255, 195, 85) 100%);
      color: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(240, 177, 61, 0.2);
    }

    .page-header h1 {
      font-size: 42px;
      font-weight: 700;
      margin-bottom: 15px;
    }

    .page-header p {
      font-size: 18px;
      opacity: 0.9;
    }

    .contact-info {
      background: white;
      padding: 30px;
      border-radius: 12px;
      margin-bottom: 30px;
      box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
    }

    .contact-info h3 {
      color: #2d3748;
      font-size: 22px;
      margin-bottom: 20px;
      font-weight: 600;
    }

    .contact-info p {
      color: #4a5568;
      margin-bottom: 12px;
      line-height: 1.6;
    }

    .info-section {
      background: #e6fffa;
      padding: 25px;
      border-radius: 12px;
      border: 1px solid #86efac;
      margin-bottom: 30px;
    }

    .info-section h3 {
      color: #166534;
      font-size: 20px;
      margin-bottom: 15px;
      font-weight: 600;
    }

    .info-list {
      color: #15803d;
      font-size: 15px;
    }

    .info-list li {
      margin-bottom: 8px;
      padding-left: 5px;
    }

    .contact-content {
      background: white;
      padding: 40px;
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
      margin-bottom: 30px;
    }

    .contact-form {
      max-width: 600px;
      margin: 0 auto;
    }

    .form-group {
      margin-bottom: 25px;
    }

    .form-label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: #2d3748;
      font-size: 16px;
    }

    .form-input, .form-select, .form-textarea {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
      background-color: #fff;
    }

    .form-input:focus, .form-select:focus, .form-textarea:focus {
      outline: none;
      border-color: rgb(240, 177, 61);
      box-shadow: 0 0 0 3px rgba(240, 177, 61, 0.1);
    }

    .form-textarea {
      resize: vertical;
      min-height: 120px;
    }

    .form-help {
      font-size: 14px;
      color: #6b7280;
      margin-top: 5px;
    }

    .submit-button {
      background: linear-gradient(135deg, rgb(240, 177, 61) 0%, rgb(255, 195, 85) 100%);
      color: white;
      border: none;
      padding: 15px 40px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
      box-shadow: 0 4px 15px rgba(240, 177, 61, 0.3);
    }

    .submit-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(240, 177, 61, 0.4);
    }

    .submit-button:disabled {
      background: #9ca3af;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .required {
      color: #dc2626;
    }

    .privacy-note {
      background: #f3f4f6;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #d1d5db;
    }

    .privacy-note h4 {
      color: #374151;
      font-size: 16px;
      margin-bottom: 10px;
      font-weight: 600;
    }

    .privacy-note p {
      color: #4b5563;
      font-size: 14px;
      margin-bottom: 8px;
    }

    @media (max-width: 768px) {
      .contact-container {
        padding: 20px 10px;
      }

      .page-header h1 {
        font-size: 32px;
      }

      .contact-content {
        padding: 25px 20px;
      }

      .contact-info {
        padding: 20px;
      }
    }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('.contact-form');
    
    form.addEventListener('submit', function(e) {
      e.preventDefault();
      
      // フォームデータの取得
      const formData = new FormData(form);
      const name = formData.get('name');
      const email = formData.get('email');
      const category = formData.get('category');
      const message = formData.get('message');

      // 基本的なバリデーション
      if (!name || !email || !category || !message) {
        alert('すべての必須項目を入力してください。');
        return;
      }

      if (!email.includes('@')) {
        alert('正しいメールアドレスを入力してください。');
        return;
      }

      // 送信ボタンを無効化
      const submitButton = form.querySelector('.submit-button');
      const originalText = submitButton.textContent;
      submitButton.textContent = '送信中...';
      submitButton.disabled = true;

      // CSRFトークンを追加
      const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
      
      // サーバーに送信
      fetch('/contact', {
        method: 'POST',
        body: formData,
        headers: {
          'X-Requested-With': 'XMLHttpRequest',
          'X-CSRF-Token': csrfToken
        }
      })
      .then(response => {
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.json();
      })
      .then(data => {
        if (data.status === 'success') {
          alert('お問い合わせを受け付けました。\n\nご連絡いただき、ありがとうございます。\n数日以内にご返信いたします。');
          form.reset();
        } else {
          alert('エラー: ' + data.message);
        }
      })
      .catch(error => {
        console.error('Error:', error);
        alert('送信中にエラーが発生しました。しばらく後でもう一度お試しください。\n\nエラー詳細: ' + error.message);
      })
      .finally(() => {
        // 送信ボタンを元に戻す
        submitButton.textContent = originalText;
        submitButton.disabled = false;
      });
    });
  });
</script>