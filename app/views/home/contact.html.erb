<div class="main">
  <div class="contact-container">
    <!-- Page Header -->
    <div class="page-header">
      <h1>ãŠå•ã„åˆã‚ã›</h1>
      <p>College Sparkã«é–¢ã™ã‚‹ã”è³ªå•ã‚„ã”è¦æœ›ã‚’ãŠèã‹ã›ãã ã•ã„ã€‚</p>
    </div>

    <!-- Contact Information -->
    <div class="contact-info">
      <h3>ãŠå•ã„åˆã‚ã›ã«ã¤ã„ã¦</h3>
      <p>College Sparkã®ã‚µãƒ¼ãƒ“ã‚¹ã«é–¢ã™ã‚‹ã”è³ªå•ã‚„ã”ä¸æ˜ãªç‚¹ãŒã”ã–ã„ã¾ã—ãŸã‚‰ã€ãŠæ°—è»½ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚</p>
      <p>çš†æ§˜ã®ã”è³ªå•ã‚„ã”æ„è¦‹ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹ã®æ”¹å–„ã«æ´»ã‹ã—ã¦ã¾ã„ã‚Šã¾ã™ã€‚</p>
      <p>ãŠè¿”äº‹ã«ã¯æ•°æ—¥ãŠæ™‚é–“ã‚’ã„ãŸã ãå ´åˆãŒã”ã–ã„ã¾ã™ã€‚</p>
    </div>

    <!-- Function Status Notice -->
    <div class="status-notice">
      <div class="status-icon">ğŸ”§</div>
      <h3>ãƒ¡ãƒ¼ãƒ«é€ä¿¡æ©Ÿèƒ½ã«ã¤ã„ã¦</h3>
      <p><strong>ç¾åœ¨ã€ãƒ¡ãƒ¼ãƒ«é€ä¿¡æ©Ÿèƒ½ã®è¨­å®šã‚’èª¿æ•´ä¸­ã§ã™ã€‚</strong></p>
      <p>ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ã¯è¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ãŒã€å®Ÿéš›ã®ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã¯ä¸€æ™‚çš„ã«åˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚ã”ä¸ä¾¿ã‚’ãŠã‹ã‘ã—ã¦ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚</p>
      <p>æ©Ÿèƒ½ã®å¾©æ—§ã¾ã§ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚</p>
    </div>

    <!-- Important Information -->
    <div class="info-section">
      <h3>ãŠå•ã„åˆã‚ã›å‰ã«ã”ç¢ºèªãã ã•ã„</h3>
      <ul class="info-list">
        <li>ã‚ˆãã‚ã‚‹ã”è³ªå•ã«ã¤ã„ã¦ã¯ã‚µã‚¤ãƒˆå†…ã®æƒ…å ±ã‚’ã”ç¢ºèªãã ã•ã„</li>
        <li>æŠ€è¡“çš„ãªå•é¡Œã«ã¤ã„ã¦ã¯è©³ç´°ã‚’ãŠæ•™ãˆã„ãŸã ã‘ã‚‹ã¨åŠ©ã‹ã‚Šã¾ã™</li>
        <li>å€‹äººçš„ãªã”ç›¸è«‡ã«ã¯å¯¾å¿œã„ãŸã—ã‹ã­ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™</li>
        <li>è¿”ä¿¡ã«ã¯å°‘ã—ãŠæ™‚é–“ã‚’ã„ãŸã ãå ´åˆãŒã‚ã‚Šã¾ã™</li>
      </ul>
    </div>

    <!-- Contact Form -->
    <div class="contact-content">
      <form class="contact-form" action="/contact" method="post">
        <%= csrf_meta_tags %>
        <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
        <div class="form-group">
          <label for="name" class="form-label">ãŠåå‰ <span class="required">*</span></label>
          <input type="text" id="name" name="name" class="form-input" required>
        </div>

        <div class="form-group">
          <label for="email" class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="required">*</span></label>
          <input type="email" id="email" name="email" class="form-input" required>
          <div class="form-help">è¿”ä¿¡ã®ãŸã‚ã«ä½¿ç”¨ã„ãŸã—ã¾ã™ã€‚å¤–éƒ¨ã«å…¬é–‹ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</div>
        </div>

        <div class="form-group">
          <label for="category" class="form-label">ãŠå•ã„åˆã‚ã›ã®ç¨®é¡ <span class="required">*</span></label>
          <select id="category" name="category" class="form-select" required>
            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
            <option value="site-bug">ã‚µã‚¤ãƒˆã®ä¸å…·åˆå ±å‘Š</option>
            <option value="data-error">ãƒ‡ãƒ¼ã‚¿ã®é–“é•ã„</option>
            <option value="feature-request">æ–°æ©Ÿèƒ½ã®ã”è¦æœ›</option>
            <option value="usage-question">ä½¿ã„æ–¹ã«ã¤ã„ã¦</option>
            <option value="partnership">ææºãƒ»å”åŠ›ã«ã¤ã„ã¦</option>
            <option value="other">ãã®ä»–</option>
          </select>
        </div>

        <div class="form-group">
          <label for="message" class="form-label">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ <span class="required">*</span></label>
          <textarea id="message" name="message" class="form-textarea" rows="6" required placeholder="ãŠå•ã„åˆã‚ã›å†…å®¹ã‚’ã§ãã‚‹ã ã‘è©³ã—ããŠæ›¸ããã ã•ã„ã€‚"></textarea>
        </div>

        <div class="form-group">
          <button type="submit" class="submit-button">é€ä¿¡ã™ã‚‹</button>
        </div>
      </form>
    </div>

    <!-- Privacy Note -->
    <div class="privacy-note">
      <h4>å€‹äººæƒ…å ±ã®å–ã‚Šæ‰±ã„ã«ã¤ã„ã¦</h4>
      <p>ãŠé€ã‚Šã„ãŸã ã„ãŸå€‹äººæƒ…å ±ã¯ã€ãŠå•ã„åˆã‚ã›ã¸ã®å›ç­”ã®ãŸã‚ã«ã®ã¿ä½¿ç”¨ã„ãŸã—ã¾ã™ã€‚</p>
      <p>ç¬¬ä¸‰è€…ã¸ã®æä¾›ã¯ä¸€åˆ‡è¡Œã„ã¾ã›ã‚“ã€‚</p>
    </div>

  </div>
</div>

<style>
    .contact-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    .page-header {
      text-align: center;
      margin-bottom: 50px;
      padding: 40px 20px;
      background: linear-gradient(135deg, rgb(240, 177, 61) 0%, rgb(255, 195, 85) 100%);
      color: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(240, 177, 61, 0.2);
    }

    .page-header h1 {
      font-size: 42px;
      font-weight: 700;
      margin-bottom: 15px;
    }

    .page-header p {
      font-size: 18px;
      opacity: 0.9;
    }

    .contact-info {
      background: white;
      padding: 30px;
      border-radius: 12px;
      margin-bottom: 30px;
      box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
    }

    .contact-info h3 {
      color: #2d3748;
      font-size: 22px;
      margin-bottom: 20px;
      font-weight: 600;
    }

    .contact-info p {
      color: #4a5568;
      margin-bottom: 12px;
      line-height: 1.6;
    }

    .info-section {
      background: #e6fffa;
      padding: 25px;
      border-radius: 12px;
      border: 1px solid #86efac;
      margin-bottom: 30px;
    }

    .info-section h3 {
      color: #166534;
      font-size: 20px;
      margin-bottom: 15px;
      font-weight: 600;
    }

    .info-list {
      color: #15803d;
      font-size: 15px;
    }

    .info-list li {
      margin-bottom: 8px;
      padding-left: 5px;
    }

    .status-notice {
      background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%);
      border: 2px solid #f59e0b;
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 30px;
      text-align: center;
      box-shadow: 0 4px 15px rgba(245, 158, 11, 0.2);
    }

    .status-icon {
      font-size: 2.5rem;
      margin-bottom: 15px;
    }

    .status-notice h3 {
      color: #92400e;
      font-size: 1.4rem;
      font-weight: 700;
      margin-bottom: 15px;
    }

    .status-notice p {
      color: #92400e;
      font-size: 1rem;
      line-height: 1.6;
      margin-bottom: 10px;
    }

    .status-notice p:last-child {
      margin-bottom: 0;
    }

    .status-notice strong {
      font-weight: 700;
    }

    .contact-content {
      background: white;
      padding: 40px;
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
      margin-bottom: 30px;
    }

    .contact-form {
      max-width: 600px;
      margin: 0 auto;
    }

    .form-group {
      margin-bottom: 25px;
    }

    .form-label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: #2d3748;
      font-size: 16px;
    }

    .form-input, .form-select, .form-textarea {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
      background-color: #fff;
    }

    .form-input:focus, .form-select:focus, .form-textarea:focus {
      outline: none;
      border-color: rgb(240, 177, 61);
      box-shadow: 0 0 0 3px rgba(240, 177, 61, 0.1);
    }

    .form-textarea {
      resize: vertical;
      min-height: 120px;
    }

    .form-help {
      font-size: 14px;
      color: #6b7280;
      margin-top: 5px;
    }

    .submit-button {
      background: linear-gradient(135deg, rgb(240, 177, 61) 0%, rgb(255, 195, 85) 100%);
      color: white;
      border: none;
      padding: 15px 40px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
      box-shadow: 0 4px 15px rgba(240, 177, 61, 0.3);
    }

    .submit-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(240, 177, 61, 0.4);
    }

    .submit-button:disabled {
      background: #9ca3af;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .required {
      color: #dc2626;
    }

    .privacy-note {
      background: #f3f4f6;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #d1d5db;
    }

    .privacy-note h4 {
      color: #374151;
      font-size: 16px;
      margin-bottom: 10px;
      font-weight: 600;
    }

    .privacy-note p {
      color: #4b5563;
      font-size: 14px;
      margin-bottom: 8px;
    }

    @media (max-width: 768px) {
      .contact-container {
        padding: 20px 10px;
      }

      .page-header h1 {
        font-size: 32px;
      }

      .contact-content {
        padding: 25px 20px;
      }

      .contact-info {
        padding: 20px;
      }
    }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('.contact-form');
    
    form.addEventListener('submit', function(e) {
      e.preventDefault();
      
      // ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã®å–å¾—
      const formData = new FormData(form);
      const name = formData.get('name');
      const email = formData.get('email');
      const category = formData.get('category');
      const message = formData.get('message');

      // åŸºæœ¬çš„ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
      if (!name || !email || !category || !message) {
        alert('ã™ã¹ã¦ã®å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
        return;
      }

      if (!email.includes('@')) {
        alert('æ­£ã—ã„ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
        return;
      }

      // é€ä¿¡ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
      const submitButton = form.querySelector('.submit-button');
      const originalText = submitButton.textContent;
      submitButton.textContent = 'é€ä¿¡ä¸­...';
      submitButton.disabled = true;

      // CSRFãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¿½åŠ 
      const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
      
      // ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡
      fetch('/contact', {
        method: 'POST',
        body: formData,
        headers: {
          'X-Requested-With': 'XMLHttpRequest',
          'X-CSRF-Token': csrfToken
        }
      })
      .then(response => {
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.json();
      })
      .then(data => {
        if (data.status === 'success') {
          alert('ãŠå•ã„åˆã‚ã›ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚\n\nã”é€£çµ¡ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚\næ•°æ—¥ä»¥å†…ã«ã”è¿”ä¿¡ã„ãŸã—ã¾ã™ã€‚');
          form.reset();
        } else {
          alert('ã‚¨ãƒ©ãƒ¼: ' + data.message);
        }
      })
      .catch(error => {
        console.error('Error:', error);
        alert('é€ä¿¡ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãå¾Œã§ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚\n\nã‚¨ãƒ©ãƒ¼è©³ç´°: ' + error.message);
      })
      .finally(() => {
        // é€ä¿¡ãƒœã‚¿ãƒ³ã‚’å…ƒã«æˆ»ã™
        submitButton.textContent = originalText;
        submitButton.disabled = false;
      });
    });
  });
</script>