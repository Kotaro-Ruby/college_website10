<h2>大学管理</h2>

<div class="stat-card" style="max-width: 200px; margin-bottom: 2rem;">
  <div class="stat-number"><%= @total_conditions %></div>
  <div class="stat-label">総大学数</div>
</div>

<div style="margin-bottom: 2rem;">
  <%= form_with url: admin_conditions_path, method: :get, local: true, style: "display: flex; gap: 1rem; align-items: center;" do |form| %>
    <%= form.text_field :search, placeholder: "大学名で検索...", value: params[:search], class: "form-control", style: "width: 300px;" %>
    <%= form.submit "検索", class: "btn btn-primary" %>
    <% if params[:search].present? %>
      <%= link_to "クリア", admin_conditions_path, class: "btn btn-secondary" %>
    <% end %>
  <% end %>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>大学名</th>
      <th>州</th>
      <th>私立/公立</th>
      <th>学費</th>
      <th>学生数</th>
      <th>操作</th>
    </tr>
  </thead>
  <tbody>
    <% @conditions.each do |condition| %>
      <tr>
        <td><%= condition.id %></td>
        <td><%= condition.college %></td>
        <td><%= condition.state %></td>
        <td><%= condition.privateorpublic %></td>
        <td>
          <% if condition.tuition && condition.tuition > 0 %>
            $<%= number_with_delimiter(condition.tuition) %>
          <% else %>
            <span style="color: #6c757d;">未設定</span>
          <% end %>
        </td>
        <td>
          <% if condition.students && condition.students > 0 %>
            <%= number_with_delimiter(condition.students) %>
          <% else %>
            <span style="color: #6c757d;">未設定</span>
          <% end %>
        </td>
        <td>
          <%= link_to "詳細", admin_condition_path(condition), class: "btn btn-secondary", style: "font-size: 0.8rem; padding: 0.25rem 0.5rem;" %>
          <%= link_to "編集", edit_admin_condition_path(condition), class: "btn btn-primary", style: "font-size: 0.8rem; padding: 0.25rem 0.5rem;" %>
          <%= link_to "削除", admin_condition_path(condition), method: :delete, 
                      class: "btn btn-danger", style: "font-size: 0.8rem; padding: 0.25rem 0.5rem;",
                      confirm: "大学「#{condition.college}」を削除しますか？この操作は取り消せません。" %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<% if defined?(Kaminari) && @conditions.respond_to?(:current_page) %>
  <div style="text-align: center; margin-top: 2rem;">
    <%= paginate @conditions %>
  </div>
<% end %>