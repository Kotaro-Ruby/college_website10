<h2><i class="fas fa-users"></i> ユーザー管理</h2>
<p style="color: #6c757d; margin-bottom: 2rem;">登録済みユーザーの一覧と統計情報</p>

<div class="stats-grid" style="grid-template-columns: repeat(3, 1fr); margin-bottom: 2rem;">
  <div class="stat-card">
    <div class="stat-number"><%= @total_users %></div>
    <div class="stat-label">総ユーザー数</div>
  </div>
  <div class="stat-card">
    <div class="stat-number"><%= @users_this_month %></div>
    <div class="stat-label">今月の新規登録</div>
  </div>
  <div class="stat-card">
    <div class="stat-number"><%= @users_today %></div>
    <div class="stat-label">今日の新規登録</div>
  </div>
</div>

<h3 style="margin: 2rem 0 1rem 0;"><i class="fas fa-list"></i> ユーザー一覧</h3>

<% if @users.any? %>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>ユーザー名</th>
        <th>メールアドレス</th>
        <th>登録日</th>
        <th>最終ログイン</th>
      </tr>
    </thead>
    <tbody>
      <% @users.each do |user| %>
        <tr>
          <td>
            <div style="display: flex; align-items: center; gap: 10px;">
              <div style="
                width: 32px; 
                height: 32px; 
                background: #fb923c; 
                border-radius: 50%; 
                display: flex; 
                align-items: center; 
                justify-content: center; 
                color: white; 
                font-weight: bold;
              ">
                <%= user.username.first.upcase %>
              </div>
              <div>
                <strong><%= user.username %></strong>
                <div style="font-size: 0.8rem; color: #6c757d;">ID: <%= user.id %></div>
              </div>
            </div>
          </td>
          <td><%= user.email %></td>
          <td style="color: #6c757d; font-size: 0.9rem;">
            <%= user.created_at.in_time_zone('Asia/Tokyo').strftime('%Y年%m月%d日 %H:%M') %>
          </td>
          <td style="color: #6c757d; font-size: 0.9rem;">
            <% if user.respond_to?(:last_login_at) && user.last_login_at %>
              <%= user.last_login_at.in_time_zone('Asia/Tokyo').strftime('%Y年%m月%d日 %H:%M') %>
            <% else %>
              <span style="color: #95a5a6;">未記録</span>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <div style="text-align: center; padding: 3rem; color: #6c757d;">
    <i class="fas fa-users" style="font-size: 3rem; margin-bottom: 1rem; display: block;"></i>
    <h4>登録ユーザーはまだいません</h4>
    <p>ユーザーが登録されると、ここに表示されます。</p>
  </div>
<% end %>